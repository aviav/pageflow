#!/bin/bash

add_and_commit() {
  git add -f $@
  git commit $@ -m "Build"
}

set -ex

yarn install --frozen-lockfile
bin/build-packages

add_and_commit \
    app/assets/javascripts/pageflow/dist/ui.js \
    package/{editor,ui,frontend}.js \
    entry_types/paged/app/assets/javascripts/pageflow_paged/dist/{editor,frontend,react-*}.js \
    entry_types/scrolled/package/{editor,contentElements-editor,contentElements-frontend}.js \
